<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="">
    <meta name="author" content="">

    <title>MSB Mastercard World Elite</title>

    <!-- CSS FILES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link
        href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200;0,400;0,600;0,700;1,200;1,700&display=swap"
        rel="stylesheet">

    <link href="css/bootstrap.min.css" rel="stylesheet">

    <link href="css/bootstrap-icons.css" rel="stylesheet">

    <link href="css/vegas.min.css" rel="stylesheet">

    <link href="css/tooplate-barista.css" rel="stylesheet">

</head>

<body>

    <main>
        <nav class="navbar navbar-expand-lg">
            <div class="container position-relative">
                <a class="navbar-brand d-flex align-items-center" href="index.html">
                    <img src="images/msb-logo1.png" class="navbar-brand-image img-fluid" alt="MSB Logo">
                    <span class="navbar-brand-text">MSB</span>
                </a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-lg-auto">
                        <li class="nav-item">
                            <div class="navbar-center-absolute d-none d-lg-block">AI Arena - Kh·ªëi QLRR - MasterCard
                                World Elite</div>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <section class="barista-section section-padding section-bg" id="barista-team">
            <div class="container">
                <div class="row justify-content-center">

                    <div class="col-lg-12 col-12 text-center mb-4 pb-lg-2">
                        <h2 class="text-white3">Kit 1: Gi·ªõi thi·ªáu s·∫£n ph·∫©m</h2>
                    </div>

                    <div class="col-lg-3 col-md-6 col-12 mb-4">
                        <a href="index.html" target="_blank" style="text-decoration: none;">
                            <div class="team-block-wrap1">
                                <div class="team-block-image-wrap1">
                                    <img src="images/Untitled1.png"
                                        class="team-block-image" alt="">
                                </div>
                                <div class="team-block-info1 d-flex flex-column">
                                    <div class="d-flex mt-auto mb-3">
                                        <h4 class="text-white mb-0">Landing page</h4>
                                    </div>
                                    <p class="text-white mb-0">Tr·ªçn v·∫πn, d·ªÖ chia s·∫ª</p>
                                </div>
                            </div>
                        </a>
                    </div>

                    <div class="col-lg-3 col-md-6 col-12 mb-4">
                        <a href="https://www.canva.com/design/DAGpHvEMwkc/z3ZRdi50UqlC2TuSDx1JnA/view" target="_blank"
                            style="text-decoration: none;">
                            <div class="team-block-wrap1">
                                <div class="team-block-image-wrap1">
                                    <img src="images/WE Black and Gold Poster .png" class="team-block-image" alt="">
                                </div>
                                <div class="team-block-info1 d-flex flex-column">
                                    <div class="d-flex mt-auto mb-3">
                                        <h4 class="text-white mb-0">Poster</h4>
                                    </div>
                                    <p class="text-white mb-0">·∫§n t∆∞·ª£ng t·ª©c th√¨ ‚Äì d·ªÖ lan t·ªèa</p>
                                </div>
                            </div>
                        </a>
                    </div>

                    <div class="col-lg-3 col-md-6 col-12 mb-4">
                        <a href="https://www.canva.com/design/DAGqCSFjWOU/rIlTTQ43YR41mMZs7CvONQ/view" target="_blank"
                            style="text-decoration: none;">
                            <div class="team-block-wrap1">
                                <div class="team-block-image-wrap1">
                                    <img src="images/Brochure WE.png" class="team-block-image" alt="">
                                </div>
                                <div class="team-block-info1 d-flex flex-column">
                                    <div class="d-flex mt-auto mb-3">
                                        <h4 class="text-white mb-0">Brochure</h4>
                                    </div>
                                    <p class="text-white mb-0">G·∫•p g·ªçn, d·ªÖ ƒë·ªçc, d·ªÖ nh·ªõ</p>
                                </div>
                            </div>
                        </a>
                    </div>

                    <div class="col-lg-3 col-md-6 col-12 mb-4">
                        <a href="videos/edit video kit1 gioi thieu WE 720P.mp4" target="_blank"
                            style="text-decoration: none;">
                            <div class="team-block-wrap1">
                                <div class="team-block-image-wrap1">
                                    <img src="images/Video.png" class="team-block-image" alt="">
                                </div>
                                <div class="team-block-info1 d-flex flex-column">
                                    <div class="d-flex mt-auto mb-3">
                                        <h4 class="text-white mb-0">Video</h4>
                                    </div>
                                    <p class="text-white mb-0">Truy·ªÅn t·∫£i sinh ƒë·ªông</p>
                                </div>
                            </div>
                        </a>
                    </div>

                </div>
            </div>


            <div class="container">
                <div class="row justify-content-start">

                    <div class="col-lg-12 col-12 text-center mb-4 pb-lg-2">
                        <h2 class="text-white3">Kit 2: Quy tr√¨nh</h2>
                    </div>

                    <div class="col-lg-3 col-md-6 col-12 mb-4">
                        <a href="https://www.canva.com/design/DAGqCwYAvHw/OPsAury8Yo1RePZt0J9AQw/view" target="_blank" style="text-decoration: none;">
                            <div class="team-block-wrap1">
                                <div class="team-block-info1 d-flex flex-column">
                                    <div class="d-flex mt-auto mb-3">
                                        <h4 class="text-white mb-0">Catalog</h4>
                                    </div>
                                    <p class="text-white mb-0">Kh√°m ph√° to√†n b·ªô s·∫£n ph·∫©m</p>
                                </div>
                                <div class="team-block-image-wrap1">
                                    <img src="images/Full Catalog WE.png"
                                        class="team-block-image img-fluid" alt="">
                                </div>
                            </div>
                        </a>
                    </div>

                    <div class="col-lg-3 col-md-6 col-12 mb-4">
                        <a href="https://www.canva.com/design/DAGqIFIWT0A/SKX_IoEnfuwgAparN3sAGw/view" target="_blank" style="text-decoration: none;">
                            <div class="team-block-wrap1">
                                <div class="team-block-info1 d-flex flex-column">
                                    <div class="d-flex mt-auto mb-3">
                                        <h4 class="text-white mb-0">Guide</h4>
                                    </div>
                                    <p class="text-white mb-0">B·∫£o hi·ªÉm du l·ªãch</p>
                                </div>
                                <div class="team-block-image-wrap1">
                                    <img src="images/HD b·∫£o hi·ªÉm du l·ªãch (1).png"
                                        class="team-block-image img-fluid" alt="">
                                </div>
                            </div>
                        </a>
                    </div>

                    <div class="col-lg-3 col-md-6 col-12 mb-4">
                        <a href="https://www.canva.com/design/DAGqHeDLkPM/U3_Sab7dCCrWOI_ALdrDmw/view" target="_blank" style="text-decoration: none;">
                            <div class="team-block-wrap1">
                                <div class="team-block-info1 d-flex flex-column">
                                    <div class="d-flex mt-auto mb-3">
                                        <h4 class="text-white mb-0">Guide</h4>
                                    </div>
                                    <p class="text-white mb-0">Ph√≤ng ch·ªù th∆∞∆°ng gia</p>
                                </div>
                                <div class="team-block-image-wrap1">
                                    <img src="images/HD ƒëƒÉng k√Ω ph√≤ng ch·ªù Th∆∞∆°ng Gia.png"
                                        class="team-block-image img-fluid" alt="">
                                </div>
                            </div>
                        </a>
                    </div>                    


                    <div class="col-lg-3 col-md-6 col-12 mb-4">
                        <a href="https://mastercardworldelite.my.canva.site/brochure" target="_blank"
                            style="text-decoration: none;">
                            <div class="team-block-wrap1">
                                <div class="team-block-info1 d-flex flex-column">
                                    <div class="d-flex mt-auto mb-3">
                                        <h4 class="text-white mb-0">Video</h4>
                                    </div>
                                    <p class="text-white mb-0">H∆∞·ªõng d·∫´n tr·ª±c quan</p>
                                </div>
                                <div class="team-block-image-wrap1">
                                    <img src="images/Poster.jpg" class="team-block-image img-fluid" alt="">
                                </div>
                            </div>
                        </a>
                    </div>

                </div>
            </div>

            <div class="container">
                <div class="row justify-content-start">

                    <div class="col-lg-12 col-12 text-center mb-4 pb-lg-2">
                        <h2 class="text-white3">Kit 3: ChƒÉm s√≥c kh√°ch h√†ng</h2>
                    </div>

                    <div class="col-lg-3 col-md-6 col-12 mb-4">
                        <a href="https://www.canva.com/design/DAGpHzJ2mdE/XviFn0AVBHwqoTNB4Z5YZg/view" target="_blank" style="text-decoration: none;">
                            <div class="team-block-wrap1">
                                <div class="team-block-info1 d-flex flex-column">
                                    <div class="d-flex mt-auto mb-3">
                                        <h4 class="text-white mb-0">Th∆∞ c√°m ∆°n</h4>
                                    </div>
                                    <p class="text-white mb-0">Tri √¢n ‚Äì g·∫Øn k·∫øt b·ªÅn l√¢u</p>
                                </div>
                                <div class="team-block-image-wrap1">
                                    <img src="images/Thi·ªáp c·∫£m ∆°n.png"
                                        class="team-block-image img-fluid" alt="">
                                </div>
                            </div>
                        </a>
                    </div>

                    <div class="col-lg-3 col-md-6 col-12 mb-4">
                        <a href="https://www.canva.com/design/DAGpcW_zKXQ/DZqGVfw32QRUX10nxdcuBQ/view" target="_blank"
                            style="text-decoration: none;">
                            <div class="team-block-wrap1">
                                <div class="team-block-info1 d-flex flex-column">
                                    <div class="d-flex mt-auto mb-3">
                                        <h4 class="text-white mb-0">Thi·ªáp sinh nh·∫≠t</h4>
                                    </div>
                                    <p class="text-white mb-0">D·∫•u ·∫•n d·ªãp ƒë·∫∑c bi·ªát </p>
                                </div>
                                <div class="team-block-image-wrap1">
                                    <img src="images/Black And Gold Elegant Birthday Party Celebration Instagram Post.png" class="team-block-image img-fluid" alt="">
                                </div>
                            </div>
                        </a>
                    </div>

                    <div class="col-lg-3 col-md-6 col-12 mb-4">
                        <a href="https://www.canva.com/design/DAGqIx39lqI/tnSvHRvFp-R9M2SlSm721A/view" target="_blank"
                            style="text-decoration: none;">
                            <div class="team-block-wrap1">
                                <div class="team-block-info1 d-flex flex-column">
                                    <div class="d-flex mt-auto mb-3">
                                        <h4 class="text-white mb-0">Qu√† t·∫∑ng</h4>
                                    </div>
                                    <p class="text-white mb-0">ƒêi·ªÅu b·∫•t ng·ªù ‚Äì tƒÉng s·ª± g·∫Øn b√≥</p>
                                </div>
                                <div class="team-block-image-wrap1">
                                    <img src="images/Ch√∫c qu√Ω kh√°ch v√† gia ƒë√¨nh m·ªôt m√πa TrƒÉng tr√≤n tr·ªçn v·∫πn y√™u th∆∞∆°ng (1).png" class="team-block-image img-fluid" alt="">
                                </div>
                            </div>
                        </a>
                    </div>

                </div>
            </div>

        </section>


        <footer class="site-footer">
            <div class="container">
                <div class="row">

                    <div class="col-lg-4 col-12 me-auto">
                        <em class="text-white d-block mb-4">Where to find us?</em>

                        <strong class="text-white">
                            <i class="bi-geo-alt me-2"></i>
                            Tr·ª• s·ªü ch√≠nh: 54A Nguy·ªÖn Ch√≠ Thanh, Qu·∫≠n ƒê·ªëng ƒêa, H√† N·ªôi
                        </strong>

                        <ul class="social-icon mt-4">
                            <li class="social-icon-item">
                                <a href="https://www.facebook.com/MSBVietnam" class="social-icon-link bi-facebook">
                                </a>
                            </li>

                            <li class="social-icon-item">
                                <a href="https://www.linkedin.com/company/msbcareer" target="_new"
                                    class="social-icon-link bi-linkedin">
                                </a>
                            </li>

                            <li class="social-icon-item">
                                <a href="https://www.youtube.com/@MSBVietnam/featured"
                                    class="social-icon-link bi-youtube">
                                </a>
                            </li>

                        </ul>
                    </div>

                    <div class="col-lg-3 col-12 mt-4 mb-3 mt-lg-0 mb-lg-0">
                        <em class="text-white d-block mb-4">Contact</em>

                        <p class="d-flex mb-1">
                        <div class="footer-hotline d-flex flex-column">
                            <div class="d-flex">
                                <strong class="me-2">Hotline:</strong>
                                <div>
                                    <a href="tel:1800599999" class="site-footer-link">
                                        1800 599 999 (mi·ªÖn ph√≠)
                                    </a><br>
                                    <a href="tel:+842439445566" class="site-footer-link ms-0">
                                        +84 2439 445 566 (qu·ªëc t·∫ø)
                                    </a>
                                </div>
                            </div>
                        </div>
                        </p>

                        <p class="d-flex">
                            <strong class="me-2">Email:</strong>

                            <a href="mailto:mfirst247@msb.com.vn" class="site-footer-link">
                                mfirst247@msb.com.vn
                            </a>
                        </p>
                    </div>


                    <div class="col-lg-5 col-12">
                        <em class="text-white d-block mb-4">Opening Hours.</em>

                        <ul class="opening-hours-list">
                            <li class="d-flex">
                                Monday - Friday
                                <span class="underline"></span>

                                <strong>8:00 - 17:00</strong>
                            </li>

                            <li class="d-flex">
                                Saturday
                                <span class="underline"></span>

                                <strong>8:00 - 12:00</strong>
                            </li>

                            <li class="d-flex">
                                Sunday
                                <span class="underline"></span>

                                <strong>Closed</strong>
                            </li>
                        </ul>
                    </div>

                    <div class="col-lg-8 col-12 mt-4">
                        <p class="copyright-text mb-0">Designed and Developed by Chuongnq3 - RDM</p>
                    </div>
                </div>
        </footer>
    </main>

    <!-- Chatbot UI -->
    <!-- N√∫t m·ªü chatbot (icon avatar) -->
    <div id="chatbot-toggle">
        <img src="images/icons8-ai-chatting-100.png" alt="Chatbot Icon">
    </div>

    <!-- Khung chatbot -->
    <div id="chatbot-container" class="hidden">
        <div id="chatbot-header">
            MSB ‚Äì H·ªó tr·ª£ m·ªçi l√∫c m·ªçi n∆°i
            <span id="chatbot-close">√ó</span>
        </div>
        <div id="chatbot-messages"></div>
        <form id="chatbot-form">
            <input type="text" id="chatbot-input" placeholder="Nh·∫≠p tin nh·∫Øn..." />
            <button type="submit" id="chatbot-send-btn">
                <img src="images/Send.png" alt="G·ª≠i" />
            </button>
        </form>

    </div>

    <!-- JAVASCRIPT FILES -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.sticky.js"></script>
    <script src="js/click-scroll.js"></script>
    <script src="js/vegas.min.js"></script>
    <script src="js/custom.js"></script>
    <script src="js/marked.min.js"></script>


    <!-- <script>
            // // B1: T·∫£i n·ªôi dung ch√≠nh s√°ch (async + cache s·∫µn)
            // let productPolicyPromise = fetch("product-policy.txt")
            //     .then(res => {
            //         if (!res.ok) throw new Error("Kh√¥ng th·ªÉ t·∫£i file ch√≠nh s√°ch.");
            //         return res.text();
            //     })
            //     .catch(err => {
            //         console.error("L·ªói khi t·∫£i ch√≠nh s√°ch:", err);
            //         return "";
            //     });

            // B2: M·ªü chatbot
            document.getElementById("chatbot-toggle").addEventListener("click", () => {
                document.getElementById("chatbot-container").classList.remove("hidden");
                document.getElementById("chatbot-toggle").style.display = "none";

                const messages = document.getElementById("chatbot-messages");
                if (messages.children.length === 0) {
                    appendMessage("AI-RDM", "Xin ch√†o, m√¨nh l√† AI-RDM! M√¨nh c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?");
                }
            });

            // B3: ƒê√≥ng chatbot
            document.getElementById("chatbot-close").addEventListener("click", () => {
                document.getElementById("chatbot-container").classList.add("hidden");
                document.getElementById("chatbot-toggle").style.display = "flex";
            });

            // B4: X·ª≠ l√Ω g·ª≠i c√¢u h·ªèi
            // Ghi nh·ªõ l·ªãch s·ª≠ h·ªôi tho·∫°i
            let messages = [
            {
                role: "system",
                content: `
                BI·ªÇU PH√ç TH·∫∫ T√çN D·ª§NG MSB MASTERCARD WORLD ELITE (√°p d·ª•ng t·ª´ 26/03/2025)

                1. L√ÉI SU·∫§T
                - L√£i su·∫•t chi ti√™u/th√°ng: 3%
                - L√£i su·∫•t r√∫t ti·ªÅn m·∫∑t t·∫°i ATM/th√°ng: 3%
                - L√£i su·∫•t ch·∫≠m tr·∫£/nƒÉm: 145% l√£i su·∫•t trong h·∫°n
                - L√£i su·∫•t tr·∫£ g√≥p: Theo ch√≠nh s√°ch t·ª´ng th·ªùi k·ª≥

                2. PH√ç PH√ÅT H√ÄNH & TH∆Ø·ªúNG NI√äN
                - Ph√≠ ph√°t h√†nh th·∫ª ch√≠nh: 2.000.000 ƒë·ªìng
                - Ph√≠ th∆∞·ªùng ni√™n th·∫ª ch√≠nh: 15.000.000 ƒë·ªìng

                3. PH√ç GIAO D·ªäCH
                - R√∫t ti·ªÅn t·∫°i ATM: 4% s·ªë ti·ªÅn, t·ªëi thi·ªÉu 50.000 ƒë·ªìng
                - Truy v·∫•n s·ªë d∆∞ t·∫°i ATM: 5.000 ƒë·ªìng/l·∫ßn
                - Giao d·ªãch ngo·∫°i t·ªá: Mi·ªÖn ph√≠

                4. PH√ç D·ªäCH V·ª§ KH√ÅC
                - Thay th·∫ª b·ªã m·∫•t: 2.000.000 ƒë·ªìng
                - Thay th·∫ª h·∫øt h·∫°n: Mi·ªÖn ph√≠
                - C·∫•p l·∫°i PIN: Mi·ªÖn ph√≠
                - Khi·∫øu n·∫°i sai: 500.000 ƒë·ªìng/l·∫ßn
                - B·∫£n sao sao k√™/h√≥a ƒë∆°n: 100.000 ƒë·ªìng/b·∫£n
                - D·ªãch v·ª• kh√°c: 100.000 ƒë·ªìng/l·∫ßn
                - Ph√≠ ch·∫≠m tr·∫£: 5% s·ªë ti·ªÅn, t·ªëi thi·ªÉu 500.000 ƒë·ªìng
                - Thay ƒë·ªïi h·∫°ng th·∫ª: 100.000 ƒë·ªìng + ph√≠ th∆∞·ªùng ni√™n m·ªõi
                - ƒê√≥ng th·∫ª tr∆∞·ªõc h·∫°n: 5.000.000 ƒë·ªìng
                - Th√¥ng b√°o bi·∫øn ƒë·ªông s·ªë d∆∞ SMS: Mi·ªÖn ph√≠
                `
            }
            ];

            // B4: X·ª≠ l√Ω g·ª≠i c√¢u h·ªèi
            document.getElementById("chatbot-form").addEventListener("submit", async function (e) {
            e.preventDefault();
            const input = document.getElementById("chatbot-input");
            const message = input.value.trim();
            if (!message) return;

            appendMessage("B·∫°n", message);
            input.value = "";
            
            // // Ch·ªù policy load xong
            // const productPolicy = await productPolicyPromise;
            // if (!productPolicy) {
            //     appendMessage("AI-RDM", "ƒêang t·∫£i d·ªØ li·ªáu s·∫£n ph·∫©m, vui l√≤ng th·ª≠ l·∫°i sau.");
            //     return;
            // }  

            // ‚úÖ Th√™m v√†o m·∫£ng l·ªãch s·ª≠ h·ªôi tho·∫°i
            messages.push({ role: "user", content: message });

            //console.log(messages);
            appendLoadingMessage();

            fetch("https://api.openai.com/v1/chat/completions", {
                method: "POST",
                headers: {
                "Content-Type": "application/json",
                "Authorization": "Bearer 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" // <-- Thay b·∫±ng key th·∫≠t
                },
                body: JSON.stringify({
                model: "gpt-3.5-turbo",
                messages: messages,
                temperature: 0.7
                })
            })
                .then(res => {
                if (!res.ok) throw new Error(`HTTP ${res.status}`);
                return res.json();
                })
                .then(data => {
                document.getElementById("loading-message")?.remove();    
                const reply = data.choices?.[0]?.message?.content?.trim();
                if (reply) {
                    appendMessage("AI-RDM", reply);

                    // ‚úÖ Th√™m ph·∫£n h·ªìi v√†o l·ªãch s·ª≠
                    messages.push({ role: "assistant", content: reply });
                } else {
                    appendMessage("AI-RDM", "Xin l·ªói, hi·ªán t·∫°i m√¨nh ch∆∞a c√≥ c√¢u tr·∫£ l·ªùi.");
                }
                })
                .catch(err => {
                    document.getElementById("loading-message")?.remove();
                    console.error("L·ªói:", err);
                    appendMessage("AI-RDM", "ƒê√£ x·∫£y ra l·ªói khi k·∫øt n·ªëi ƒë·∫øn GPT.");
                });
            });


            // B5: H√†m hi·ªÉn th·ªã tin nh·∫Øn
            function appendMessage(sender, text) {
                const msgWrapper = document.createElement("div");
                msgWrapper.classList.add("chat-message-wrapper");

                if (sender === "AI-RDM") {
                    msgWrapper.classList.add("bot");
                    msgWrapper.innerHTML = `
                        <div style="display: flex; align-items: flex-start;">
                            <img src="images/icons8-ai-chatting-100.png" alt="Bot Avatar"
                                style="width: 32px; height: 32px; border-radius: 50%; margin-right: 8px;">
                            <div class="chat-message bot">${text}</div>
                        </div>`;
                } else {
                    msgWrapper.classList.add("user");
                    msgWrapper.innerHTML = `
                        <div class="chat-message user">${text}</div>`;
                }

                const messages = document.getElementById("chatbot-messages");
                messages.appendChild(msgWrapper);
                messages.scrollTop = messages.scrollHeight;
            }

            function appendLoadingMessage() {
                const msgWrapper = document.createElement("div");
                msgWrapper.classList.add("chat-message-wrapper", "bot");
                msgWrapper.setAttribute("id", "loading-message");

                msgWrapper.innerHTML = `
                    <div style="display: flex; align-items: flex-start;">
                        <img src="images/icons8-ai-chatting-100.png" alt="Bot Avatar"
                            style="width: 32px; height: 32px; border-radius: 50%; margin-right: 8px;">
                        <div class="chat-message bot typing">...</div>
                    </div>`;

                const messages = document.getElementById("chatbot-messages");
                messages.appendChild(msgWrapper);
                messages.scrollTop = messages.scrollHeight;
            }

        </script> -->

    <!-- <script>
        const assistant_id = "asst_ZRPcnjQrPo38gbph1YHXDknt"; // üîÅ Thay b·∫±ng assistant th·∫≠t
        const file_ids = [
            "file-Qpo1C7bghFKXPC3P5EMDNC",
            "file-BZ6eUFduEfAQm4Nj8qNWDB",
            "file-CsviP5uwrQrNftPHheCTwz",
            "file-2RsHApc5XUBaU8ViiXV9f2"
        ];
        const apiKey = "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"; // üîÅ Thay b·∫±ng API key th·∫≠t

        let thread_id = localStorage.getItem("thread_id");
        if (thread_id === "undefined" || !thread_id) {
        thread_id = null;
        }

        function resetThread() {
        localStorage.removeItem("thread_id");
        thread_id = null;
        }

        window.onload = () => {
        resetThread(); // Reset thread m·ªói khi F5
        };

        document.getElementById("chatbot-toggle").addEventListener("click", () => {
            document.getElementById("chatbot-container").style.display = "flex";
            document.getElementById("chatbot-toggle").style.display = "none";

            const messages = document.getElementById("chatbot-messages");
            if (messages.children.length === 0) {
                appendMessage("AI-RDM", "Xin ch√†o, m√¨nh l√† AI-RDM! M√¨nh c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?");
            }
        });

        document.getElementById("chatbot-close").addEventListener("click", () => {
            document.getElementById("chatbot-container").style.display = "none";
            document.getElementById("chatbot-toggle").style.display = "inline-block";
        });

        document.getElementById("chatbot-form").addEventListener("submit", async function (e) {
            e.preventDefault();
            const input = document.getElementById("chatbot-input");
            const message = input.value.trim();
            if (!message) return;

            appendMessage("B·∫°n", message);
            input.value = "";
            appendLoadingMessage();

            const reply = await sendMessageToAssistant(message);
            document.getElementById("loading-message")?.remove();
            appendMessage("AI-RDM", reply);
        });

        async function sendMessageToAssistant(userMessage) {
            try {
                if (!thread_id) {
                    // B1: T·∫°o thread tr·ªëng
                    const threadRes = await fetch("https://api.openai.com/v1/threads", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${apiKey}`,
                        "OpenAI-Beta": "assistants=v2"
                    },
                    body: JSON.stringify({})
                    });

                    const threadData = await threadRes.json();
                    if (!threadRes.ok || !threadData.id) {
                    throw new Error("Kh√¥ng th·ªÉ t·∫°o thread m·ªõi: " + JSON.stringify(threadData));
                    }

                    thread_id = threadData.id;
                    localStorage.setItem("thread_id", thread_id);

                    // B2: G·ª≠i message ch·ª©a file_ids
                    await fetch(`https://api.openai.com/v1/threads/${thread_id}/messages`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${apiKey}`,
                        "OpenAI-Beta": "assistants=v2"
                    },
                    body: JSON.stringify({
                        role: "user",
                        content: userMessage,
                        file_ids: file_ids
                    })
                    });
                } else {
                    await fetch(`https://api.openai.com/v1/threads/${thread_id}/messages`, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": `Bearer ${apiKey}`,
                            "OpenAI-Beta": "assistants=v2"
                        },
                        body: JSON.stringify({
                            role: "user",
                            content: userMessage
                        })
                    });
                }

                const runRes = await fetch(`https://api.openai.com/v1/threads/${thread_id}/runs`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${apiKey}`,
                        "OpenAI-Beta": "assistants=v2"
                    },
                    body: JSON.stringify({
                        assistant_id: assistant_id
                    })
                });

                const runData = await runRes.json();
                const run_id = runData.id;

                let runStatus = "in_progress";
                while (runStatus === "in_progress" || runStatus === "queued") {
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    const checkRes = await fetch(`https://api.openai.com/v1/threads/${thread_id}/runs/${run_id}`, {
                        headers: {
                            Authorization: `Bearer ${apiKey}`,
                            "OpenAI-Beta": "assistants=v2"
                        }
                    });
                    const checkData = await checkRes.json();
                    runStatus = checkData.status;
                }

                const msgRes = await fetch(`https://api.openai.com/v1/threads/${thread_id}/messages`, {
                    headers: {
                        Authorization: `Bearer ${apiKey}`,
                        "OpenAI-Beta": "assistants=v2"
                    }
                });

                const msgData = await msgRes.json();
                const lastMessage = msgData.data.find(m => m.role === "assistant");
                return lastMessage?.content?.[0]?.text?.value || "Kh√¥ng c√≥ ph·∫£n h·ªìi.";
            } catch (err) {
                console.error("L·ªói Assistant API:", err);
                return "ƒê√£ x·∫£y ra l·ªói khi k·∫øt n·ªëi GPT.";
            }
        }

        function appendMessage(sender, text) {
            const msgWrapper = document.createElement("div");
            msgWrapper.classList.add("chat-message-wrapper");

            if (sender === "AI-RDM") {
                msgWrapper.classList.add("bot");
                msgWrapper.innerHTML = `
                    <div style="display: flex; align-items: flex-start;">
                        <img src="images/icons8-ai-chatting-100.png" alt="Bot Avatar"
                            style="width: 32px; height: 32px; border-radius: 50%; margin-right: 8px;">
                        <div class="chat-message bot">${text}</div>
                    </div>`;
            } else {
                msgWrapper.classList.add("user");
                msgWrapper.innerHTML = `
                    <div class="chat-message user">${text}</div>`;

            }

            const messages = document.getElementById("chatbot-messages");
            messages.appendChild(msgWrapper);
            messages.scrollTop = messages.scrollHeight;
        }

        function appendLoadingMessage() {
            const msgWrapper = document.createElement("div");
            msgWrapper.classList.add("chat-message-wrapper", "bot");
            msgWrapper.setAttribute("id", "loading-message");
            msgWrapper.innerHTML = `<div class="chat-message bot">ƒêang so·∫°n...</div>`;

            const messages = document.getElementById("chatbot-messages");
            messages.appendChild(msgWrapper);
            messages.scrollTop = messages.scrollHeight;
        }
    </script> -->

    <script>
        /* ‚Äî‚Äî‚Äî‚Äî CONFIG ‚Äî‚Äî‚Äî‚Äî */
        const assistant_id = "asst_ZRPcnjQrPo38gbph1YHXDknt"; // üîÅ Thay b·∫±ng assistant th·∫≠t
        const file_ids = [
            "file-Qpo1C7bghFKXPC3P5EMDNC",
            "file-UBuhfJGuKz2FP5CGYVaxZ3",
            "file-2DhFpmmptFfSgQdeN7emuu",
            "file-4f7CKN8QDa2qrVWYWvsmqp"
        ];
        const apiKey = "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"; // üîÅ Thay b·∫±ng API key th·∫≠t

        /* ‚Äî‚Äî‚Äî‚Äî STATE ‚Äî‚Äî‚Äî‚Äî */
        let thread_id = localStorage.getItem("thread_id") || null;

        /* ‚Äî‚Äî‚Äî‚Äî HELPERS ‚Äî‚Äî‚Äî‚Äî */
        function scrollMessages() {
            const m = document.getElementById("chatbot-messages");
            m.scrollTop = m.scrollHeight;
        }
        // function appendMessage(sender, rawText) {
        //     const wrap = document.createElement("div");
        //     wrap.className = `chat-message-wrapper ${sender === "AI" ? "bot" : "user"}`;

        //     // 1) B·ªè marker tr√≠ch d·∫´n n·∫øu kh√¥ng c·∫ßn
        //     let html = rawText.replace(/„Äê\d+:\d+‚Ä†source„Äë/g, "");

        //     // 2) Thay \n th√†nh <br> ƒë·ªÉ gi·ªØ xu·ªëng d√≤ng
        //     html = html.replace(/\n/g, "<br>");

        //     wrap.innerHTML = `<div class="chat-message">${html}</div>`;

        //     console.log(wrap);
        //     document.getElementById("chatbot-messages").appendChild(wrap);
        //     scrollMessages();
        // }

        function appendMessage(sender, rawText) {
            const wrap = document.createElement("div");
            wrap.className = `chat-message-wrapper ${sender === "AI" ? "bot" : "user"}`;

            // 1. Xo√° marker ngu·ªìn
            const cleaned = rawText.replace(/„Äê\d+:\d+‚Ä†source„Äë/g, "");

            // 2. Thay \n b·∫±ng markdown-compatible xu·ªëng d√≤ng
            const withLineBreak = cleaned.replace(/\n/g, '  \n');

            // 3. D√πng marked.parseInline ƒë·ªÉ kh√¥ng sinh <p>
            let html;
            try {
                html = marked.parseInline(withLineBreak);

                // 4. N·∫øu Markdown v·∫´n kh√¥ng render xu·ªëng d√≤ng, √©p b·∫±ng <br>
                if (!html.includes('<br>')) {
                    html = html.replace(/\n/g, '<br>');
                }
            } catch (e) {
                html = cleaned.replace(/\n/g, "<br>");
            }

            // 5. G·∫Øn v√†o chat
            wrap.innerHTML = `<div class="chat-message ${sender === "AI" ? "bot" : "user"}">${html}</div>`;
            document.getElementById("chatbot-messages").appendChild(wrap);
            scrollMessages();
        }


        function appendLoading() {
            const id = "loading-msg";
            const wrap = document.createElement("div");
            wrap.id = id; wrap.className = "chat-message-wrapper bot";
            wrap.innerHTML = `<div class="chat-message">ƒêang so·∫°n‚Ä¶</div>`;
            document.getElementById("chatbot-messages").appendChild(wrap);
            scrollMessages();
        }

        /* ‚Äî‚Äî‚Äî‚Äî OPEN / CLOSE ‚Äî‚Äî‚Äî‚Äî */
        document.getElementById("chatbot-toggle").onclick = () => {
            document.getElementById("chatbot-container").style.display = "flex";
            document.getElementById("chatbot-toggle").style.display = "none";
            if (!document.querySelector(".bot")) appendMessage("AI", "Xin ch√†o, m√¨nh l√† AI‚ÄëRDM! M√¨nh c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?");
        };
        document.getElementById("chatbot-close").onclick = () => {
            document.getElementById("chatbot-container").style.display = "none";
            document.getElementById("chatbot-toggle").style.display = "flex";
        };

        /* ‚Äî‚Äî‚Äî‚Äî MAIN SEND ‚Äî‚Äî‚Äî‚Äî */
        document.getElementById("chatbot-form").addEventListener("submit", async e => {
            e.preventDefault();
            const input = document.getElementById("chatbot-input");
            const text = input.value.trim();
            if (!text) return;
            appendMessage("user", text);
            input.value = "";
            appendLoading();
            const answer = await sendMessage(text);
            document.getElementById("loading-msg")?.remove();
            appendMessage("AI", answer);
        });

        async function sendMessage(userText) {
            try {
                /* 1Ô∏è‚É£  N·∫øu ch∆∞a c√≥ thread th√¨ t·∫°o m·ªõi */
                if (!thread_id) {
                    const res = await fetch("https://api.openai.com/v1/threads", {
                        method: "POST",
                        headers: { "Content-Type": "application/json", Authorization: `Bearer ${apiKey}`, "OpenAI-Beta": "assistants=v2" },
                        body: JSON.stringify({})
                    });
                    const data = await res.json();
                    thread_id = data.id;
                    localStorage.setItem("thread_id", thread_id);
                }

                /* 2Ô∏è‚É£  T·∫°o message ‚Äî l·∫ßn ƒê·∫¶U c·∫ßn ƒë√≠nh k√®m file */
                const attachments = (!localStorage.getItem("sent_first")) ?
                    file_ids.map(id => ({ file_id: id, tools: [{ type: "file_search" }] })) : [];

                const msgRes = await fetch(`https://api.openai.com/v1/threads/${thread_id}/messages`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json", Authorization: `Bearer ${apiKey}`, "OpenAI-Beta": "assistants=v2" },
                    body: JSON.stringify({ role: "user", content: userText, attachments })
                });
                if (!localStorage.getItem("sent_first")) localStorage.setItem("sent_first", "1");

                /* 3Ô∏è‚É£  T·∫°o run */
                const runRes = await fetch(`https://api.openai.com/v1/threads/${thread_id}/runs`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json", Authorization: `Bearer ${apiKey}`, "OpenAI-Beta": "assistants=v2" },
                    body: JSON.stringify({ assistant_id, instructions: "Tr·∫£ l·ªùi ng·∫Øn g·ªçn, ƒë√∫ng s·ªë li·ªáu, b·∫±ng ti·∫øng Vi·ªát." })
                });
                const { id: run_id } = await runRes.json();

                /* 4Ô∏è‚É£  Poll t·ªõi khi xong */
                while (true) {
                    await new Promise(r => setTimeout(r, 1000));
                    const check = await fetch(`https://api.openai.com/v1/threads/${thread_id}/runs/${run_id}`, {
                        headers: { Authorization: `Bearer ${apiKey}`, "OpenAI-Beta": "assistants=v2" }
                    });
                    const { status } = await check.json();
                    if (status === "completed") break;
                    if (["failed", "cancelled"].includes(status)) throw new Error("Run failed: " + status);
                }

                /* 5Ô∏è‚É£  L·∫•y tin nh·∫Øn m·ªõi nh·∫•t c·ªßa assistant */
                const msgList = await fetch(`https://api.openai.com/v1/threads/${thread_id}/messages?limit=1`, {
                    headers: { Authorization: `Bearer ${apiKey}`, "OpenAI-Beta": "assistants=v2" }
                });
                const { data } = await msgList.json();
                return data?.[0]?.content?.[0]?.text?.value || "Xin l·ªói, m√¨nh ch∆∞a c√≥ th√¥ng tin.";
            } catch (err) {
                console.error(err);
                return "ƒê√£ x·∫£y ra l·ªói khi k·∫øt n·ªëi GPT.";
            }
        }
    </script>

</body>

</html>
